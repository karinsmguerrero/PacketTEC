<html>
<head>
  
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <title>Administrador de mensajes</title>
  <script type="text/javascript" src="js\jquery-3.2.1.js"></script>
  <link rel="stylesheet" type="text/css" href="..\css\MainStyle.css"/>

</head>
<body>
  <header id="header">
    <nav id="barra-superior">
      <img id="logo" src="https://k60.kn3.net/1/1/C/A/4/3/D89.png">
      <ul class='menu'>
        <li><a href='file:///C:\Users\karin\Desktop\PacketTEC web site\index.html'>Inicio</a></li>
        <li><a href="file:///C:\Users\karin\Desktop\PacketTEC web site\pages\NetworkManager.html" >Administrador de red</a></li>
        <li><a href='file:///C:\Users\karin\Desktop\PacketTEC web site\pages\MessageManager.html'>Administrador de mensajes</a></li>
      </ul>
    </nav>
  </header>


    <nav id="nav">
      <div class="innertube">
        <table>
          <tr>
            <td>
              <h1>Buscar:</h1>
            </td>
          </tr>
          <tr>
            <td colspan="2">
                <div class="styled-select black rounded">
                  <select id="search-query" name="search-query" required>
                    <option value="id">Id</option>
                    <option value="message">Mensaje</option>
                    <option value="to">Destinatario</option>
                    <option value="from">Remitente</option>
                    <option value="attachment">Nombre de adjunto</option>
                    <option value="type">Tipo de adjunto</option>
                  </select>
                </div>
                <input type="text" name="search-value" id="queryBox" style="margin-top: 10px;"><br>
                <button type="button" class="btn btn-4 btn-4c icon-arrow-right" id="btnSearch" onclick="CreateTableFromJSON()">Buscar</button>
            </td>
          </tr>
        </table>
      </div>
    </nav>

  <main>
    <div class="innertube">
      <div id="showData">
        <table id="resultTable" class="table-show">
          <tr>
            <th>ID</th>
            <th>Destinatario</th>
            <th>Remitente</th>
            <th>Mensaje</th>
            <th>Adjunto</th>
          </tr>
        </table>
      </div>

    </div>
  </main>

  <script>
  function getResult(){

    var result = [{"Id":"123", "from": "Karina", "to":"alejandro", "msg": "Hola", "attch":"img.png"},
                   {"Id":"124", "from": "Karina", "to":"fabian", "msg": "Hola", "attch":"img_hola.png"},
                   {"Id":"125", "from": "Karina", "to":"chizco", "msg": "Holis", "attch":"none"}];
                   return result;
  }
    function CreateTableFromJSON() {
        var myBooks = getResult();

      // EXTRACT VALUE FOR HTML HEADER.
        // ('Book ID', 'Book Name', 'Category' and 'Price')
        var col = [];
        for (var i = 0; i < myBooks.length; i++) {
            for (var key in myBooks[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        // CREATE DYNAMIC TABLE.
        var table = document.getElementById("resultTable");
        // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

        var tr = table.insertRow(-1);                   // TABLE ROW.

        /*for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      // TABLE HEADER.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }
*/
        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < myBooks.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = myBooks[i][col[j]];
            }
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    }
</script>
</body>
</html>
